name: CI/CD Pipeline
on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:
jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Basic validation
      run: |
        echo "ğŸ” Running basic validation..."
        
        # Check required files exist
        required_files=("README.md" "LICENSE" "master_deploy.sh" "Dockerfile")
        for file in "${required_files[@]}"; do
          if [ -f "$file" ]; then
            echo "âœ… $file exists"
          else
            echo "âŒ Missing: $file"
            exit 1
          fi
        done
        
        # Check for large files
        large_files=$(find . -type f -size +50M 2>/dev/null | wc -l)
        if [ "$large_files" -eq 0 ]; then
          echo "âœ… No large files found"
        else
          echo "âš ï¸ Found $large_files large file(s) - may impact performance"
        fi
        
        echo "âœ… Basic validation passed"
  summary:
    needs: [validate]
    runs-on: ubuntu-latest
    if: always()
    steps:
    - name: CI/CD Summary
      run: |
        echo "ğŸ‰ CI/CD Pipeline completed!"
        echo ""
        if [ "${{ needs.validate.result }}" = "success" ]; then
          echo "âœ… All checks passed! Repository is healthy."
          echo "ğŸš€ Ready for deployment with: ./master_deploy.sh"
        else
          echo "âš ï¸ Some checks failed. Review the logs above."
        fi
        echo ""
        echo "ğŸ’¡ GitHub Free Tier: This workflow uses only free features!"
